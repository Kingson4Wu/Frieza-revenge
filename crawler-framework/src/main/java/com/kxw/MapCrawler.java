package com.kxw;

import java.io.UnsupportedEncodingException;

/**
 * Created by kingsonwu on 18/1/3.
 */
public class MapCrawler {

    public static void main(String[] args) throws UnsupportedEncodingException {

        String data = "{\n"
            + "\t\"code\": 0,\n"
            + "\t\"data\": [{\n"
            + "\t\t\"piece_id\": 124,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u5b9d\\u5b89\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u5b9d\\u5b89\\u673a\\u573a\",\n"
            + "\t\t\"define_type\": 2,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-08-09 16:53:32\",\n"
            + "\t\t\"center\": \"22.624290803271,113.81333827972\",\n"
            + "\t\t\"lat_lng\": \"22.633104388467224,113.80707263946533;22.63405503355033,113.80891799926758;22"
            + ".632906336580486,113.81059169769287;22.631559576181054,113.81059169769287;22.631876462168275,113"
            + ".81363868713379;22.630054357763576,113.81372451782227;22.628866015789466,113.81217956542969;22"
            + ".62569705363059,113.81423950195312;22.625855503473602,113.81698608398438;22.622488405016867,113"
            + ".8189172744751;22.619041995320803,113.81179332733154;22.62343912352421,113.80921840667725;22"
            + ".626568525507043,113.8099479675293;22.627162707709754,113.80587100982666;22.630173191395897,113"
            + ".80685806274414;22.633104388467224,113.80707263946533\",\n"
            + "\t\t\"history_max_density\": 38894.90734,\n"
            + "\t\t\"current_n\": 39729.845693,\n"
            + "\t\t\"current_growth\": 1.86421\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 125,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u5b9d\\u5b89\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u5317\\u7ad9\",\n"
            + "\t\t\"define_type\": 3,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-08-09 17:15:54\",\n"
            + "\t\t\"center\": \"22.61024731712,114.03042554855\",\n"
            + "\t\t\"lat_lng\": \"22.609851147209774,114.02392387390137;22.611614094554735,114.028000831604;22"
            + ".613674139231748,114.0314769744873;22.611891410058206,114.03291463851929;22.609791721624774,114"
            + ".03407335281372;22.60604785802495,114.02778625488281;22.607058116968425,114.02682065963745;22"
            + ".607909898157338,114.02602672576904;22.609851147209774,114.02392387390137\",\n"
            + "\t\t\"history_max_density\": 55759.284934,\n"
            + "\t\t\"current_n\": 49563.679827,\n"
            + "\t\t\"current_growth\": 2.112168\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 126,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u9f99\\u5c97\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u4e1c\\u7ad9\",\n"
            + "\t\t\"define_type\": 3,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-08-09 17:19:46\",\n"
            + "\t\t\"center\": \"22.60237817858,114.11986112595\",\n"
            + "\t\t\"lat_lng\": \"22.602610941181492,114.12061214447021;22.601689793263827,114.12047266960144;22"
            + ".60194731910899,114.11838054656982;22.602759512848895,114.11821961402893;22.60280903670237,114"
            + ".11912083625793;22.602610941181492,114.12061214447021\",\n"
            + "\t\t\"history_max_density\": 5957.626738,\n"
            + "\t\t\"current_n\": 2357.618863,\n"
            + "\t\t\"current_growth\": 2.065861\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 127,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u798f\\u7530\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u798f\\u7530\\u7ad9\",\n"
            + "\t\t\"define_type\": 3,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-08-09 17:27:08\",\n"
            + "\t\t\"center\": \"22.538061207215,114.05689358711\",\n"
            + "\t\t\"lat_lng\": \"22.539503020650557,114.05644297599792;22.536906754674728,114.05637860298157;22"
            + ".53692657368388,114.0576982498169;22.53960211380447,114.0575909614563;22.539503020650557,114"
            + ".05644297599792\",\n"
            + "\t\t\"history_max_density\": 3424.822452,\n"
            + "\t\t\"current_n\": 2430.657826,\n"
            + "\t\t\"current_growth\": 7.063293\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 147,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u7f57\\u6e56\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u706b\\u8f66\\u7ad9\",\n"
            + "\t\t\"define_type\": 3,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-08-09 17:35:00\",\n"
            + "\t\t\"center\": \"22.530405966185,114.11887407303\",\n"
            + "\t\t\"lat_lng\": \"22.53321045972794,114.11930322647095;22.533131181540742,114.11620259284973;22"
            + ".52906811351406,114.11673903465271;22.529276224780688,114.1201400756836;22.53321045972794,114"
            + ".11930322647095\",\n"
            + "\t\t\"history_max_density\": 27640.096471,\n"
            + "\t\t\"current_n\": 19814.579796,\n"
            + "\t\t\"current_growth\": 1.037783\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 135,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u5357\\u5c71\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u6e7e\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": \"2439924805\",\n"
            + "\t\t\"update_time\": \"2016-06-02 15:46:52\",\n"
            + "\t\t\"center\": \"22.503656363278,113.9494228363\",\n"
            + "\t\t\"lat_lng\": \"22.49154350335566,113.94388675689697;22.49138489913809,113.9513111114502;22"
            + ".506451488014502,113.95126819610596;22.50661007495835,113.9435863494873;22.49154350335566,113"
            + ".94388675689697\",\n"
            + "\t\t\"history_max_density\": 1529.752148,\n"
            + "\t\t\"current_n\": 715.476687,\n"
            + "\t\t\"current_growth\": 2.293017\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 117,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u798f\\u7530\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u798f\\u7530\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-07-25 11:21:07\",\n"
            + "\t\t\"center\": \"22.516134869714,114.06958580017\",\n"
            + "\t\t\"lat_lng\": \"22.513389496711437,114.06271934509277;22.51079273994031,114.06458616256714;22"
            + ".51398416697013,114.07076597213745;22.51638264437808,114.07046556472778;22.51701694549389,114"
            + ".06930685043335;22.516878192373543,114.06769752502441;22.513389496711437,114.06271934509277\",\n"
            + "\t\t\"history_max_density\": 4813.593846,\n"
            + "\t\t\"current_n\": 1558.288047,\n"
            + "\t\t\"current_growth\": 1.32084\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 164,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u798f\\u7530\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u7687\\u5c97\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-07-25 11:23:55\",\n"
            + "\t\t\"center\": \"22.521734468697,114.07331943512\",\n"
            + "\t\t\"lat_lng\": \"22.52115965305758,114.07089471817017;22.51788910477485,114.07872676849365;22"
            + ".52185339577246,114.08042192459106;22.524152632439385,114.0725040435791;22.52115965305758,114"
            + ".07089471817017\",\n"
            + "\t\t\"history_max_density\": 2187.413682,\n"
            + "\t\t\"current_n\": 900.917117,\n"
            + "\t\t\"current_growth\": 1.272766\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 163,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u7f57\\u6e56\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u7f57\\u6e56\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": \"2016-07-25 11:27:37\",\n"
            + "\t\t\"center\": \"22.528205934926,114.11741495132\",\n"
            + "\t\t\"lat_lng\": \"22.52885009185081,114.11637425422668;22.526907701843136,114.11720037460327;22"
            + ".52824557543919,114.12107348442078;22.52946451565649,114.12063360214233;22.52837440702743,114"
            + ".1190242767334;22.52885009185081,114.11637425422668\",\n"
            + "\t\t\"history_max_density\": 3241.064915,\n"
            + "\t\t\"current_n\": 1551.474111,\n"
            + "\t\t\"current_growth\": 1.463782\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 136,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u7f57\\u6e56\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6587\\u9526\\u6e21\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": \"3242441618\",\n"
            + "\t\t\"update_time\": null,\n"
            + "\t\t\"center\": \"22.539968757855,114.13078308105\",\n"
            + "\t\t\"lat_lng\": \"22.540048032116882,114.1281008720398;22.536064444155652,114.12949562072754;22"
            + ".536877026155636,114.13406610488892;22.53941383675122,114.13676977157593;22.54165332611524,114"
            + ".1338300704956;22.54161368945118,114.13093328475952;22.540048032116882,114.1281008720398\",\n"
            + "\t\t\"history_max_density\": null,\n"
            + "\t\t\"current_n\": 1768.761094,\n"
            + "\t\t\"current_growth\": 1.370014\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 140,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u76d0\\u7530\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6c99\\u5934\\u89d2\\u53e3\\u5cb8\",\n"
            + "\t\t\"define_type\": 1,\n"
            + "\t\t\"user\": null,\n"
            + "\t\t\"update_time\": null,\n"
            + "\t\t\"center\": \"22.551770212367,114.22762155533\",\n"
            + "\t\t\"lat_lng\": \"22.550492017917918,114.2300033569336;22.553315920068364,114.22688126564026;22"
            + ".55160176881465,114.22466039657593;22.55008576759003,114.22599077224731;22.548827374837416,114"
            + ".2260229587555;22.548183311114787,114.22773957252502;22.550492017917918,114.2300033569336\",\n"
            + "\t\t\"history_max_density\": null,\n"
            + "\t\t\"current_n\": 2092.29271,\n"
            + "\t\t\"current_growth\": 1.857147\n"
            + "\t}, {\n"
            + "\t\t\"piece_id\": 133,\n"
            + "\t\t\"city\": \"\\u6df1\\u5733\\u5e02\",\n"
            + "\t\t\"area\": \"\\u5357\\u5c71\\u533a\",\n"
            + "\t\t\"port_name\": \"\\u6df1\\u5733\\u897f\\u7ad9\",\n"
            + "\t\t\"define_type\": 3,\n"
            + "\t\t\"user\": null,\n"
            + "\t\t\"update_time\": null,\n"
            + "\t\t\"center\": \"22.527973046683,113.90810608864\",\n"
            + "\t\t\"lat_lng\": \"22.52873117079854,113.90668988227844;22.52708608573795,113.90666842460632;22"
            + ".527185187802175,113.90853524208069;22.528602339543045,113.90841722488403;22.52873117079854,113"
            + ".90668988227844\",\n"
            + "\t\t\"history_max_density\": null,\n"
            + "\t\t\"current_n\": null,\n"
            + "\t\t\"current_growth\": null\n"
            + "\t}]\n"
            + "}";
        System.out.println(unicode2String(data));
    }

    /**
     * 判断是否为中文字符
     *
     * @param c
     * @return
     */
    public static boolean isChinese(char c) {
        Character.UnicodeBlock ub = Character.UnicodeBlock.of(c);
        if (ub == Character.UnicodeBlock.CJK_UNIFIED_IDEOGRAPHS
            || ub == Character.UnicodeBlock.CJK_COMPATIBILITY_IDEOGRAPHS
            || ub == Character.UnicodeBlock.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A
            || ub == Character.UnicodeBlock.GENERAL_PUNCTUATION
            || ub == Character.UnicodeBlock.CJK_SYMBOLS_AND_PUNCTUATION
            || ub == Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS) {
            return true;
        }
        return false;
    }

    /**
     * unicode 转 中文
     */


    public static String unicode2String(String unicode) {

        StringBuffer string = new StringBuffer();

        String[] hex = unicode.split("\\\\u");

        for (int i = 0; i < hex.length; i++) {

            try {
                // 汉字范围 \u4e00-\u9fa5 (中文)
                if(hex[i].length()>=4){//取前四个，判断是否是汉字
                    String chinese = hex[i].substring(0, 4);
                    try {
                        int chr = Integer.parseInt(chinese, 16);
                        boolean isChinese = isChinese((char)chr);
                        //转化成功，判断是否在  汉字范围内
                        if (isChinese){//在汉字范围内
                            // 追加成string
                            string.append((char) chr);
                            //并且追加  后面的字符
                            String behindString = hex[i].substring(4);
                            string.append(behindString);
                        }else {
                            string.append(hex[i]);
                        }
                    } catch (NumberFormatException e1) {
                        string.append(hex[i]);
                    }

                }else{
                    string.append(hex[i]);
                }
            } catch (NumberFormatException e) {
                string.append(hex[i]);
            }
        }

        return string.toString();
    }
}
